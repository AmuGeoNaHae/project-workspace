<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.webproject.mapper.ReviewMapper">

	<insert id="insertReview" parameterType="com.team.webproject.dto.ReviewDTO">
        INSERT INTO reviews
        	(
        		review_writer_code,
        		performance_code,
        		review_star,
        		review_content,
        		review_date,
        		review_like,
        		review_code,
        		reviewer_id
        	)
        VALUES
        	(
        		#{review_writer_code},
        		#{performance_code},
        		#{review_star},
        		#{review_content},
        		sysdate,
        		0,
        		review_code_seq.nextval,
        		#{reviewer_id, jdbcType=VARCHAR}
        	)
    </insert>
    <select id="getPerformanceReviews" resultType="ReviewDTO">
		SELECT * FROM reviews WHERE performance_code=#{performance_code}
	</select>
    <select id="selectReviewByCode" parameterType="java.lang.Integer" resultType="com.team.webproject.dto.ReviewDTO">
        SELECT * FROM reviews WHERE review_code = #{value}
    </select>

    <update id="updateReview" parameterType="com.team.webproject.dto.ReviewDTO">
        UPDATE reviews
        SET review_star = #{reviewStar},
            review_content = #{reviewContent},
            review_date = #{reviewDate},
            review_like = #{reviewLike}
        WHERE review_code = #{reviewCode}
    </update>

    <delete id="deleteReview" parameterType="java.lang.Integer">
        DELETE FROM reviews WHERE review_code = #{value}
    </delete>
    
    <select id="getAllReviews" resultType="com.team.webproject.dto.ReviewDTO">
        SELECT * FROM reviews
    </select>
</mapper>